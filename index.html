<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <title>Chip8 Emulator</title>
  </head>
  <body>
    <h1 id="title">CHIP-8 WASM</h1>
    <div id="meta-container">
      <div id="chip8-container">
        <canvas id="chip8-screen" style="border:1px solid #48ff00;"></canvas>
        <div id="register-container">
          <h2>Registers</h2>
          <table id="registers">
            <tr>
              <td id="0">
                <h3>0x0</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="1">
                <h3>0x1</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="2">
                <h3>0x2</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="3">
                <h3>0x3</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="4">
                <h3>0x4</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="5">
                <h3>0x5</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="6">
                <h3>0x6</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="7">
                <h3>0x7</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
            </tr>
            <tr>
              <td id="8">
                <h3>0x8</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="9">
                <h3>0x9</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="10">
                <h3>0xA</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="11">
                <h3>0xB</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="12">
                <h3>0xC</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="13">
                <h3>0xD</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="14">
                <h3>0xE</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
              <td id="15">
                <h3>0xF</h3>
                <div class="reg-val"><p>0</p></div>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div id="info-container">
        <h2>What is Chip8?</h2>
        <p>Chip8 is an interpreted programming language developed in the 1970s. It was developed for the Chip8 virtual machine to simplify video game development for 1800 Microprocessor Systems.
        It consists of 35 Unique Opcodes, 4KB of RAM, 1MHz CPU, 32 x 64 pixel display and a hexadecimal keyboard.
        </p>
        <h2>How did I Implement it?</h2>
        <p>I started implementing Chip8 in python but handling different integer sizes proved to be a nightmare. After a little research, I went with rust.
          I started by implementing the minimum viable opcodes namely DXYN, ANNN, 7XNN, 6XNN, 1NNN and getting the IBM rom to display. I then realized that I wanted to run it in the browser so I used wasm-pack, an all in one WebAssembly project tool. The rust code is compiled to the wasm32-unknown-unknown target with Object bindings exposed via wasm-bindgen. We then use the bindings in JS client code to read from display memory and run the cpu at 10 times on each of the requestAnimationFrame calls</p>
        <h2>How Does it Work?</h2>
        <p>This chip8 emulator works by first selecting a ROM from the drop down menu, then pressing Run ROM. To interact with a rom you will use your keyboard. The mapping is as follows</p>
        <ul>
          <li>0,1,2,3,4 -> Q,W,E,R,T</li>
          <li>5,6,7,8,9 -> A,S,D,F,G</li>
          <li>A,B,C,D,E -> Z,X,C,V,B</li>
          <li>F -> Space</li>
        </ul>
        <label for="roms">Choose a ROM:</label>
        <p>Trip8 is my favorite ROM!</p>
        <select name="roms" id="rom-select">
          <option value="base-logo.ch8">Base Logo</option>
          <option value="snake.ch8">Snake</option>
          <option value="trip8.ch8">Trip8</option>
          <option value="ibm.ch8">IBM Logo</option>
          <option value="life.ch8">Game of Life</option>
          <option value="logo.ch8">Chip8 Logo</option>
          <option value="maze.ch8">Maze Demo</option>
          <option value="minimal.ch8">Minimal Game</option>
          <option value="particles.ch8">Particles</option>
          <option value="stars.ch8">Stars</option>
          <option value="triangle.ch8">Sierpinski Triangle</option>
          <option value="corax-test.ch8">Corax Test</option>
          <option value="connect4.ch8">Connect4</option>
        </select>
        <button id="start-button">Run ROM</button>
      </div>
    </div>
    <script src="index.js"></script>
    
  </body>
</html>
